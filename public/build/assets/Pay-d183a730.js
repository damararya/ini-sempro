import{W as v,R as P,j as a,a as e,Y as M,b as S}from"./app-35ca1426.js";import{A as J}from"./AuthenticatedLayout-944c029a.js";import{P as B}from"./PrimaryButton-c7d9b404.js";import{S as K}from"./SecondaryButton-0a9380ac.js";import"./ApplicationLogo-e749607d.js";import"./transition-7520bd03.js";const h=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r||0);function W(r){var w,k;const{type:c,fixedAmount:s=12e4,paidThisPeriod:l=!1,periodLabel:_,lastPayments:m=[],paymentPeriodMonths:p=3,pendingProof:o=null}=r,{data:D,setData:j,post:A,processing:x,errors:u,reset:I}=v({amount:s}),i=v({proof:null}),d=P.useRef(null);P.useEffect(()=>{j("amount",s)},[s]);const T=!!((k=(w=r==null?void 0:r.auth)==null?void 0:w.user)!=null&&k.is_admin),f=c==="sampah",y=f?"Bayar Iuran Sampah":"Bayar Iuran Ronda",b=f?"ronda":"sampah",R=t=>{t.preventDefault(),A(route("iuran.pay.store",{type:c}),{preserveScroll:!0,onSuccess:()=>{I("amount")}})},F=t=>{const L=t.target.files&&t.target.files[0]?t.target.files[0]:null;i.setData("proof",L)},C=t=>{t.preventDefault(),o&&i.post(route("iuran.pay.proof",o.id),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{i.reset(),d.current&&(d.current.value="")}})},g=_||`Periode ${p} Bulan`,n="inline-flex items-center justify-center rounded-full border border-white/18 bg-white/10 px-3 py-1 text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-white/70",N="inline-flex items-center justify-center rounded-full border border-white/18 bg-white/8 px-4 py-2 text-xs font-semibold uppercase tracking-[0.22em] text-white/80 transition hover:border-white/28 hover:bg-white/14";return a(J,{auth:r.auth,errors:r.errors,header:a("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a("div",{children:[e("span",{className:"badge-soft",children:"Pembayaran Iuran"}),e("h2",{className:"mt-3 text-3xl font-semibold tracking-tight text-white",children:y}),e("p",{className:"mt-2 text-sm text-white/60",children:"Lakukan pembayaran dengan mudah, pantau status periode, dan unggah bukti transfer secara instan."})]}),a("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-5 py-4 text-xs text-white/60",children:[e("div",{className:"text-white/80",children:g}),a("div",{className:"mt-1 text-white/50",children:["Nominal tetap ",h(s)]})]})]}),children:[e(M,{title:y}),a("div",{className:"space-y-10",children:[a("section",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e("article",{className:"panel-muted px-6 py-6",children:a("div",{className:"flex h-full flex-col justify-between gap-4",children:[a("div",{className:"space-y-2",children:[e("span",{className:n,children:"Jenis Iuran"}),e("h3",{className:"text-2xl font-semibold text-white capitalize",children:c}),e("p",{className:"text-sm text-white/60",children:"Pembayaran otomatis tercatat sesuai kategori untuk administrasi lingkungan."})]}),a(S,{href:route("iuran.pay.create",{type:b}),className:N,children:["Ke Iuran ",b]})]})}),e("article",{className:"panel-muted px-6 py-6",children:a("div",{className:"flex h-full flex-col gap-4",children:[e("span",{className:n,children:"Periode"}),e("h3",{className:"text-2xl font-semibold text-white",children:g}),a("p",{className:"text-sm text-white/60",children:["Pembayaran berlaku setiap ",p," bulan untuk menjaga layanan tetap optimal."]})]})}),e("article",{className:"panel-muted px-6 py-6",children:a("div",{className:"flex h-full flex-col gap-4",children:[e("span",{className:n,children:"Status"}),e("h3",{className:`text-2xl font-semibold ${l?"text-emerald-200":"text-rose-200"}`,children:l?"Sudah Bayar":"Belum Bayar"}),e("p",{className:"text-sm text-white/60",children:l?"Terima kasih. Anda telah menyelesaikan kewajiban untuk periode berjalan.":"Segera selesaikan pembayaran agar layanan lingkungan tetap berjalan lancar."})]})})]}),!T&&a("section",{className:"panel-muted px-6 py-8 space-y-6",children:[l&&e("div",{className:"rounded-2xl border border-sky-400/30 bg-sky-500/15 px-5 py-4 text-sm text-sky-100 shadow-[0_20px_50px_-30px_rgba(56,189,248,0.55)]",children:"Anda sudah membayar untuk periode ini. Pembayaran ulang akan memperbarui tanggal dan menggantikan nominal yang ada."}),a("form",{onSubmit:R,className:"space-y-6",children:[a("div",{className:"space-y-3",children:[e("span",{className:n,children:"Nominal Tetap"}),a("div",{className:"rounded-[1.75rem] border border-white/12 bg-white/10 px-6 py-5 shadow-[0_25px_65px_-40px_rgba(37,99,235,0.9)]",children:[e("div",{className:"text-sm text-white/60",children:"Jumlah yang akan dibayarkan"}),e("div",{className:"mt-2 text-4xl font-semibold text-white",children:h(s)}),e("p",{className:"mt-3 text-xs text-white/50",children:"Pembayaran ini tercatat otomatis dan dapat diakses pada riwayat kapan pun diperlukan."})]}),u.amount&&e("p",{className:"text-xs text-rose-300",children:u.amount})]}),e("input",{type:"hidden",name:"amount",value:D.amount}),a("div",{className:"flex flex-wrap items-center gap-3",children:[e(B,{type:"submit",disabled:x,children:x?"Memproses...":"Bayar Sekarang"}),e(S,{href:route("dashboard"),className:N,children:"Kembali ke Dasbor"})]})]})]}),o&&a("section",{className:"panel-muted px-6 py-8 space-y-5",children:[a("div",{className:"space-y-2",children:[e("h3",{className:"text-xl font-semibold text-white",children:"Unggah Bukti Transfer"}),e("p",{className:"text-sm text-white/60",children:"Kami mencatat pembayaran Anda. Mohon unggah foto bukti transfer untuk membantu admin melakukan verifikasi."}),e("blockquote",{className:"rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-sm italic text-white/70",children:'"Jangan lupa unggah bukti pembayaran Anda agar verifikasi iuran dapat diproses lebih cepat."'})]}),a("form",{onSubmit:C,encType:"multipart/form-data",className:"space-y-5",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-white/50",children:"Bukti Transfer (Foto)"}),e("input",{ref:d,type:"file",accept:"image/*",className:"w-full rounded-xl border border-white/15 bg-white/8 px-4 py-3 text-sm text-white/80 file:mr-4 file:rounded-full file:border-0 file:bg-sky-500/90 file:px-4 file:py-2 file:text-xs file:font-semibold file:uppercase file:tracking-[0.2em] file:text-white hover:border-white/25",onChange:F}),e("p",{className:"text-xs text-white/50",children:"Unggah foto dalam format JPG/PNG, maksimal 5MB."}),i.data.proof&&a("div",{className:"text-xs text-white/60",children:["File dipilih: ",i.data.proof.name]}),i.errors.proof&&e("p",{className:"text-xs text-rose-300",children:i.errors.proof})]}),a("div",{className:"flex flex-wrap items-center gap-3",children:[e(B,{type:"submit",disabled:i.processing,children:i.processing?"Mengunggah...":"Simpan Bukti"}),e(K,{type:"button",onClick:()=>{var t;return(t=d.current)==null?void 0:t.click()},children:"Pilih Ulang File"})]})]})]}),a("section",{className:"panel-muted px-6 py-8 space-y-4",children:[a("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a("div",{children:[e("h3",{className:"text-xl font-semibold text-white",children:"Riwayat Pembayaran"}),e("p",{className:"text-sm text-white/60",children:"Semua transaksi tertata rapi sebagai arsip transparan komunitas."})]}),e("span",{className:n,children:"Rekaman"})]}),Array.isArray(m)&&m.length>0?e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-white/10 text-sm text-white/70",children:[e("thead",{children:a("tr",{className:"text-xs uppercase tracking-[0.25em] text-white/40",children:[e("th",{className:"px-4 py-3 text-left",children:"Tanggal"}),e("th",{className:"px-4 py-3 text-left",children:"Nominal"}),e("th",{className:"px-4 py-3 text-left",children:"Status"}),e("th",{className:"px-4 py-3 text-left",children:"Bukti"}),e("th",{className:"px-4 py-3 text-left",children:"Invoice"})]})}),e("tbody",{className:"divide-y divide-white/5",children:m.map(t=>a("tr",{className:"hover:bg-white/6",children:[e("td",{className:"px-4 py-3",children:t.paid_at?new Date(t.paid_at).toLocaleString("id-ID",{dateStyle:"medium",timeStyle:"short"}):"-"}),e("td",{className:"px-4 py-3",children:h(t.amount)}),e("td",{className:"px-4 py-3",children:e("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${t.paid?"bg-emerald-500/20 text-emerald-200":"bg-white/10 text-white/60"}`,children:t.paid?"Aktif":"Tidak Aktif"})}),e("td",{className:"px-4 py-3",children:t.proof_url?e("a",{href:t.proof_url,className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-300 transition hover:text-sky-100",target:"_blank",rel:"noopener noreferrer",children:"Lihat"}):e("span",{className:"text-white/40",children:"-"})}),e("td",{className:"px-4 py-3",children:t.id?e("a",{href:route("iuran.invoice",t.id,!1),target:"_blank",rel:"noopener noreferrer",className:"text-xs font-semibold uppercase tracking-[0.25em] text-emerald-300 transition hover:text-emerald-100",children:"PDF"}):e("span",{className:"text-white/40",children:"-"})})]},t.id))})]})}):e("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-5 text-sm text-white/60",children:"Belum ada riwayat pembayaran."})]})]})]})}export{W as default};
